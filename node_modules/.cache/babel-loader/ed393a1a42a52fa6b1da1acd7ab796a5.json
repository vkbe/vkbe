{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _lodash = require('lodash.debounce');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _isRetina = require('is-retina');\n\nvar _isRetina2 = _interopRequireDefault(_isRetina);\n\nvar _isClient = require('is-client');\n\nvar _isClient2 = _interopRequireDefault(_isClient);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ImageResponsive = function (_Component) {\n  _inherits(ImageResponsive, _Component);\n\n  function ImageResponsive() {\n    _classCallCheck(this, ImageResponsive);\n\n    var _this = _possibleConstructorReturn(this, (ImageResponsive.__proto__ || Object.getPrototypeOf(ImageResponsive)).call(this));\n\n    _this.handleResize = function () {\n      _this.setState({\n        src: _this.pickOptimalSource(_this.node.offsetWidth)\n      });\n    };\n\n    _this.onLoad = function () {\n      _this.setState({\n        loaded: true\n      });\n    };\n\n    _this.pickOptimalSource = function (width) {\n      var _this$props = _this.props,\n          src = _this$props.src,\n          sources = _this$props.sources;\n      var sortedSources = sources.sort(function (a, b) {\n        return a.maxWidth > b.maxWidth;\n      });\n      var bestBiggerSource = sortedSources.filter(function (a) {\n        return a.maxWidth >= width;\n      })[0];\n      var bestSmallerSource = sortedSources.reduce(function (memo, source) {\n        return source.maxWidth <= width ? source : memo;\n      }, null);\n      var source = bestBiggerSource || bestSmallerSource;\n\n      if (source) {\n        return source.src;\n      }\n\n      return src;\n    };\n\n    _this.state = {\n      width: false,\n      loaded: true,\n      src: false\n    };\n    _this.src = null;\n    _this.isClient = (0, _isClient2.default)();\n    _this.isRetina = _isClient2.default && (0, _isRetina2.default)();\n    _this.handleResizeDebounced = (0, _lodash2.default)(_this.handleResize, 150);\n    return _this;\n  }\n\n  _createClass(ImageResponsive, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          type = _props.type,\n          transition = _props.transition;\n\n      if (_isClient2.default) {\n        this.handleResize();\n        window.addEventListener('resize', this.handleResizeDebounced);\n\n        if (type === 'image' && transition) {\n          this.node.addEventListener('load', this.onLoad);\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.setState({\n        loaded: false\n      });\n\n      if (_isClient2.default) {\n        window.removeEventListener('resize', this.handleResizeDebounced);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          sources = _props2.sources,\n          width = _props2.width,\n          type = _props2.type,\n          transition = _props2.transition,\n          children = _props2.children,\n          height = _props2.height,\n          alt = _props2.alt,\n          otherProps = _objectWithoutProperties(_props2, ['sources', 'width', 'type', 'transition', 'children', 'height', 'alt']);\n\n      var style = {};\n\n      if (transition) {\n        if (type === 'image') {\n          style.transition = 'opacity .2s ease-in-out';\n        }\n      }\n\n      if (type === 'image') {\n        style.opacity = this.state.loaded ? 1 : 0;\n      } else if (type === 'background-image') {\n        style.backgroundSize = '100% 100%';\n\n        if (this.state.src) {\n          style.backgroundImage = 'url(\\'' + this.state.src + '\\')';\n        }\n\n        if (width) {\n          style.width = width;\n        }\n\n        if (height) {\n          style.height = height;\n        }\n      }\n\n      style = _extends({}, style, style);\n      return type === 'image' ? _react2.default.createElement('img', _extends({\n        ref: function ref(node) {\n          return _this2.node = node;\n        }\n      }, otherProps, {\n        alt: alt,\n        src: this.state.src,\n        style: style\n      })) : _react2.default.createElement('div', _extends({\n        ref: function ref(node) {\n          return _this2.node = node;\n        }\n      }, otherProps, {\n        style: style\n      }), children);\n    }\n  }], [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (!prevState.src) {\n        return nextProps.src;\n      }\n\n      if (nextProps.src !== prevState.src || !_isClient2.default) {\n        return null;\n      }\n\n      return {\n        src: this.pickOptimalSource(this.node.offsetWidth, nextProps)\n      };\n    }\n  }]);\n\n  return ImageResponsive;\n}(_react.Component);\n\nImageResponsive.propTypes = {\n  src: _propTypes2.default.string.isRequired,\n  type: _propTypes2.default.string,\n  transition: _propTypes2.default.bool\n};\nImageResponsive.defaultProps = {\n  src: '',\n  style: {},\n  type: 'image',\n  transition: true\n};\nexports.default = ImageResponsive;","map":{"version":3,"sources":["/Users/doduchoang/My Documents/vkbe/node_modules/react-image-responsive/lib/ImageResponsive.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_lodash","_lodash2","_isRetina","_isRetina2","_isClient","_isClient2","_propTypes","_propTypes2","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","ImageResponsive","_Component","_this","getPrototypeOf","handleResize","setState","src","pickOptimalSource","node","offsetWidth","onLoad","loaded","width","_this$props","sources","sortedSources","sort","a","b","maxWidth","bestBiggerSource","filter","bestSmallerSource","reduce","memo","state","isClient","isRetina","handleResizeDebounced","componentDidMount","_props","type","transition","window","addEventListener","componentWillUnmount","removeEventListener","render","_this2","_props2","children","height","alt","otherProps","style","opacity","backgroundSize","backgroundImage","createElement","ref","getDerivedStateFromProps","nextProps","prevState","Component","propTypes","string","isRequired","bool","defaultProps"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _lodash = require('lodash.debounce');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _isRetina = require('is-retina');\n\nvar _isRetina2 = _interopRequireDefault(_isRetina);\n\nvar _isClient = require('is-client');\n\nvar _isClient2 = _interopRequireDefault(_isClient);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ImageResponsive = function (_Component) {\n    _inherits(ImageResponsive, _Component);\n\n    function ImageResponsive() {\n        _classCallCheck(this, ImageResponsive);\n\n        var _this = _possibleConstructorReturn(this, (ImageResponsive.__proto__ || Object.getPrototypeOf(ImageResponsive)).call(this));\n\n        _this.handleResize = function () {\n            _this.setState({\n                src: _this.pickOptimalSource(_this.node.offsetWidth)\n            });\n        };\n\n        _this.onLoad = function () {\n            _this.setState({ loaded: true });\n        };\n\n        _this.pickOptimalSource = function (width) {\n            var _this$props = _this.props,\n                src = _this$props.src,\n                sources = _this$props.sources;\n\n            var sortedSources = sources.sort(function (a, b) {\n                return a.maxWidth > b.maxWidth;\n            });\n            var bestBiggerSource = sortedSources.filter(function (a) {\n                return a.maxWidth >= width;\n            })[0];\n\n            var bestSmallerSource = sortedSources.reduce(function (memo, source) {\n                return source.maxWidth <= width ? source : memo;\n            }, null);\n\n            var source = bestBiggerSource || bestSmallerSource;\n            if (source) {\n                return source.src;\n            }\n\n            return src;\n        };\n\n        _this.state = {\n            width: false,\n            loaded: true,\n            src: false\n        };\n\n        _this.src = null;\n        _this.isClient = (0, _isClient2.default)();\n        _this.isRetina = _isClient2.default && (0, _isRetina2.default)();\n        _this.handleResizeDebounced = (0, _lodash2.default)(_this.handleResize, 150);\n        return _this;\n    }\n\n    _createClass(ImageResponsive, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _props = this.props,\n                type = _props.type,\n                transition = _props.transition;\n\n            if (_isClient2.default) {\n                this.handleResize();\n                window.addEventListener('resize', this.handleResizeDebounced);\n                if (type === 'image' && transition) {\n                    this.node.addEventListener('load', this.onLoad);\n                }\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.setState({ loaded: false });\n            if (_isClient2.default) {\n                window.removeEventListener('resize', this.handleResizeDebounced);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props2 = this.props,\n                sources = _props2.sources,\n                width = _props2.width,\n                type = _props2.type,\n                transition = _props2.transition,\n                children = _props2.children,\n                height = _props2.height,\n                alt = _props2.alt,\n                otherProps = _objectWithoutProperties(_props2, ['sources', 'width', 'type', 'transition', 'children', 'height', 'alt']);\n\n            var style = {};\n            if (transition) {\n                if (type === 'image') {\n                    style.transition = 'opacity .2s ease-in-out';\n                }\n            }\n            if (type === 'image') {\n                style.opacity = this.state.loaded ? 1 : 0;\n            } else if (type === 'background-image') {\n                style.backgroundSize = '100% 100%';\n                if (this.state.src) {\n                    style.backgroundImage = 'url(\\'' + this.state.src + '\\')';\n                }\n                if (width) {\n                    style.width = width;\n                }\n                if (height) {\n                    style.height = height;\n                }\n            }\n            style = _extends({}, style, style);\n            return type === 'image' ? _react2.default.createElement('img', _extends({\n                ref: function ref(node) {\n                    return _this2.node = node;\n                }\n            }, otherProps, {\n                alt: alt,\n                src: this.state.src,\n                style: style\n            })) : _react2.default.createElement(\n                'div',\n                _extends({ ref: function ref(node) {\n                        return _this2.node = node;\n                    } }, otherProps, { style: style }),\n                children\n            );\n        }\n    }], [{\n        key: 'getDerivedStateFromProps',\n        value: function getDerivedStateFromProps(nextProps, prevState) {\n            if (!prevState.src) {\n                return nextProps.src;\n            }\n            if (nextProps.src !== prevState.src || !_isClient2.default) {\n                return null;\n            }\n\n            return {\n                src: this.pickOptimalSource(this.node.offsetWidth, nextProps)\n            };\n        }\n    }]);\n\n    return ImageResponsive;\n}(_react.Component);\n\nImageResponsive.propTypes = {\n    src: _propTypes2.default.string.isRequired,\n    type: _propTypes2.default.string,\n    transition: _propTypes2.default.bool\n};\nImageResponsive.defaultProps = {\n    src: '',\n    style: {},\n    type: 'image',\n    transition: true\n};\nexports.default = ImageResponsive;\n"]},"metadata":{},"sourceType":"script"}